**Statistics_6th_TIL**

## **3부. 데이터 분석하기**
  **12.통계 기반 분석 방법론**  
  12.1. 분석 모델 개요  
  12.2. 주성분 분석(PCA)  
  12.4. 다중공선성 해결과 섀플리 밸류 분석  
  12.6. Z-test와 T-test  
  12.7. ANOVA  
  12.8. 카이제곱 검정(교차분석)


### 12.통계 기반 분석 방법론

### 12.1. 분석 모델 개요  
  통계 모델 vs 기계 학습  
  통계 모델은 모형과 해석을 중요하게 생각하며, 오차와 불확정성을 강조한다.  
  기계 학습은 대용량 데이터를 활용하여 예측의 정확도를 높이는 것을 중요하게 생각한다.

  기계학습의 분석 방법론 분류  
  1) 종속변수의 유무에 따라: 지도 학습, 비지도 학습  
  2) 독립변수와 종속변수의 속성에 따라 (질적 척도, 양적 척도)
  
  ![image](https://github.com/user-attachments/assets/96612afa-9d8c-404e-96ab-f66881ff9fcd)

### 12.2. 주성분 분석  
  주성분 분석: 여러 개의 독립변수들이 소수의 특정한 변수들로 축약되도록 가공하는 기법.  
  => 모형을 간단하게 만들고 분석 결과를 보다 효과적으로 해석할 수 있다.  
  사용되는 변수들이 모두 양적 변수여야 하고, 관측치들이 서로 독립적이고 정규분포를 이루어야 한다.

  전체 분산 중 각 주성분이 갖고 있는 분산이 곧 해당 주성분의 설명력이라 할 수 있다. 
  
### 12.4.1 다중공선성 해결

  다중공선성이 높을 경우, 계수 추정이 불안정하고 표준 오차가 커져서, 유의성이 낮게 나올 수 있다.  
  이로 인해 해석이 어려워지고, 모델 예측력도 떨어질 수 있다.
  
  다중공선성 판별 기준  
  1) 독립 변수 간 상관성 확인  
  2) 회귀분석 결정계수, 회귀계수 t값 확인  
     : 결정계수 값은 크지만 t값이 낮아 각 계수 추정치의 표준오차가 크다는 것은 독립변수 간에 상관성이 크다는 것을 의미한다.  
  3) 분산팽창계수 VIF   
     : VIF 값은 회귀분석 모델에 사용된 다른 변수들이 해당 변수 대신 모델을 설명해줄 수 있는 정도를 나타낸다.  
     5 이상일 경우 다중공선성을 의심하고, 10 이상일 경우 다중공선성이 있고 판단한다.

  다중공선성 완화 방법  
  1) VIF값 활용  
     : VIF값이 높은 변수들 중에서 종속변수와의 상관성이 가장 낮은 변수를 제거하고 다시 VIF값을 확인하는 것을 반복한다.  
     이 때 모델의 가설과 비즈니스적 요소도 함께 고려해야 한다.  
  2) 표본 관측치를 추가 확보  
     : 회귀계수의 분산과 표준오차 감소를 유도해 다중공선성을 완화시킬 수도 있다.  
  3) 변수 가공  
     : 변수 값에 로그를 취하거나, 표준화 및 정규화 등 변수를 가공하여 다른 변수와의 상관성을 완화시킬 수 있다.  
     이 때 정보의 손실이 발생하지만, 변수 제거 시 보다 낫다고 판단할 경우 사용한다.  
  4) 주성분 분석  
  5) 변수 선택 알고리즘 활용 (전진 선택법, 후진 제거법, 단계적 선택법)

### 12.4.2 섀플리 밸류 분석   
  섀플리 밸류 분석 Shapley Value: 각 독립 변수가 종속 변수의 설명력에 기여하는 순수한 수치를 계산하는 방법.  
  ![image](https://github.com/user-attachments/assets/4534c858-02cf-4e3a-98ed-876e1f63c711)  
  (ex: x1, x2 조합에서 x1의 기여도: 0.32 - 0.21 = 0.11)  
  ![image](https://github.com/user-attachments/assets/6cc15294-c8c9-417b-96b1-a1a73fcd56e0)  

  각 변수의 평균적인 기여도를 공정하게 나눠주는 메커니즘이지만, 값을 절대적인 중요치를 의미하지는 않는다.

### 12.6. Z-test와 T-test & 12.7. ANOVA

  단일 표본 집단의 평균 변화를 분석하거나 두 집단의 평균값 혹은 비율 차이를 분석할 때 사용한다.  
  분석 대상 변수가 양적 변수이며, 정규 분포이고 등분산일 경우 사용 가능하다.  
  (이분산일 경우, Welch's t-test를 수행한다.)

  모집단의 분산을 알 수 있거나, 표본의 크기가 30이상일 경우 Z-test 를,  
  그렇지 않고 표본 집단의 정규분포를 가정할 수 없을 때 t-test를 사용한다.  
  비교 대상의 개수가 둘 이상일 때, 표본 집단의 크기가 30 이상인 경우 ANOVA를 사용할 수 있다.

### 12.8. 카이제곱 검정(교차분석)

  범주형 변수들 간의 연관성을 분석하기 위해 결합분포를 활용하는 방법.

  변수들 간의 범주를 동시에 교차하는 교차표를 만들어  
  변수가 서로 독립적일 경우 나타날 기대빈도를 구하고,  
  실제 관측빈도와 기대빈도의 차이를 통해 연관성을 분석한다.
  
  연관성의 정도를 수치로 표현할 수 없어  
  검정 통계량 카이 제곱을 통한 변수 간에 연관성이 없다는 귀무가설의 기각 여부를 통해 판단한다.
  
  ![image](https://github.com/user-attachments/assets/222361ac-0fe1-4dba-8b41-0747e8a2e979)  
  ![image](https://github.com/user-attachments/assets/6e891f0d-0e88-465b-a203-5114be019f49)  
  ![image](https://github.com/user-attachments/assets/2352090e-c332-4fdc-9867-532352c5089a)  
  자유도는 (행의 수 - 1) (열의 수 - 1) 를 통해 구한다.
  
  각 셀의 카이 제곱 값을 모두 합하고, 해당하는 자유도와 유의수준에 대한 임계치 값과 비교한다.  
  임계치 > 카이제곱의 합 일 경우, 귀무가설을 채택한다.  
